<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html"><link rel="next" title="KLEngine" href="../klengine/index.html"><link rel="prev" title="VectorKLStore" href="vector.html">
        <link rel="prefetch" href="../../_static/logo-light.png" as="image">
        <link rel="prefetch" href="../../_static/logo-dark.png" as="image">

    <link rel="shortcut icon" href="../../_static/favicon.ico"><!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>CascadeKLStore - AgentHeaven Doc</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=43646d4c" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>

<div class="announcement">
  <aside class="announcement-content">
     🚧 AgentHeaven is in active development. Features may change. 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">AgentHeaven Doc</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/logo-light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../_static/logo-dark.png" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../introduction/index.html">Introduction</a><input aria-label="Toggle navigation of Introduction" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/philosophy.html">Philosophy &amp; Vision</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/architecture.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/learning.html">Learning AgentHeaven</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a><input aria-label="Toggle navigation of Getting Started" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/installation.html">Installation Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/setup.html">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/5min-quickstart.html">5min Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/60min-tutorial.html">60min Tutorial</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../configuration/index.html">Configuration</a><input aria-label="Toggle navigation of Configuration" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../configuration/core.html">Core Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration/llm.html">LLM Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration/database.html">Database Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration/vdb.html">Vector Database Configuration</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Main Guide (Python)</a><input aria-label="Toggle navigation of Main Guide (Python)" checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../utils/index.html">Utilities</a><input aria-label="Toggle navigation of Utilities" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../utils/basic/index.html">Basic Utilities</a><input aria-label="Toggle navigation of Basic Utilities" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../utils/basic/config_utils.html">Configuration Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utils/basic/hash_utils.html">Hashing Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utils/basic/parallel_utils.html">Multi-Thread Parallelization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utils/basic/jinja_utils.html">Template Processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utils/basic/serialize_utils.html">Serialization Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utils/basic/str_utils.html">String Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utils/basic/misc_utils.html">Miscellaneous Utilities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../utils/db.html">Database Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/vdb.html">Vector Database Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cache.html">Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../llm.html">LLM</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ukf/index.html">UKF (Unified Knowledge Format)</a><input aria-label="Toggle navigation of UKF (Unified Knowledge Format)" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ukf/ukf-v1.0.html">UKF v1.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ukf/data-types.html">UKF Data Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ukf/builtin-templates.html">Built-in Templates</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">KLStore</a><input aria-label="Toggle navigation of KLStore" checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="base.html">BaseKLStore</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache.html">CacheKLStore</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html">DatabaseKLStore</a></li>
<li class="toctree-l3"><a class="reference internal" href="vector.html">VectorKLStore</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">CascadeKLStore</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../klengine/index.html">KLEngine</a><input aria-label="Toggle navigation of KLEngine" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../klengine/base.html">BaseKLEngine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../klengine/facet.html">FacetKLEngine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../klengine/daac.html">DAACKLEngine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../klengine/vector.html">VectorKLEngine</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../klbase.html">KLBase</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../toolspec/index.html">ToolSpec</a><input aria-label="Toggle navigation of ToolSpec" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../toolspec/base.html">ToolSpec</a></li>
<li class="toctree-l3"><a class="reference internal" href="../toolspec/builtins.html">Built-in ToolSpecs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../agent.html">Agent</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../cli-guide/index.html">CLI Guide</a><input aria-label="Toggle navigation of CLI Guide" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cli-guide/repo-management.html">Repo Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli-guide/llm-inference.html">LLM Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli-guide/llm-session.html">LLM Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli-guide/prompt-management.html">Prompt Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli-guide/knowledge-management.html">Knowledge Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../gui-guide/index.html">GUI Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../example-applications/index.html">Example Applications</a><input aria-label="Toggle navigation of Example Applications" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../example-applications/nl2sql-system.html">NL2SQL System</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../contribution/index.html">Contribution</a><input aria-label="Toggle navigation of Contribution" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contribution/overview.html">Contribution Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribution/for_developers.html">Guide for Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribution/feature_workflow.html">Feature Addition Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribution/srs.html">Simple SRS</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../contribution/ar/index.html">Allocated Requirements (AR)</a><input aria-label="Toggle navigation of Allocated Requirements (AR)" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/base_ukf.html">BaseUKF - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/cache.html">Cache - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/llm.html">LLM - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/prompts.html">Prompts - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/database.html">Database - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/klstore.html">KLStore - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/klengine.html">KLEngine - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/klbase.html">KLBase - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/agent.html">Agent - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/sie.html">Structured Information Extraction (SIE) - Allocated Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribution/ar/cli.html">Command Line Interface (CLI) - Allocated Requirements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../api_index.html">API Reference</a><input aria-label="Toggle navigation of API Reference" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../api/ahvn.html">ahvn package</a><input aria-label="Toggle navigation of ahvn package" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.adapter.html">ahvn.adapter package</a><input aria-label="Toggle navigation of ahvn.adapter package" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.adapter.base.html">ahvn.adapter.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.adapter.db.html">ahvn.adapter.db module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.adapter.vdb.html">ahvn.adapter.vdb module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.cache.html">ahvn.cache package</a><input aria-label="Toggle navigation of ahvn.cache package" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cache.base.html">ahvn.cache.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cache.callback_cache.html">ahvn.cache.callback_cache module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cache.db_cache.html">ahvn.cache.db_cache module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cache.disk_cache.html">ahvn.cache.disk_cache module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cache.in_mem_cache.html">ahvn.cache.in_mem_cache module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cache.json_cache.html">ahvn.cache.json_cache module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cache.no_cache.html">ahvn.cache.no_cache module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.cli.html">ahvn.cli package</a><input aria-label="Toggle navigation of ahvn.cli package" class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cli.ahvn.html">ahvn.cli.ahvn module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cli.babel_cli.html">ahvn.cli.babel_cli module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cli.chat_cli.html">ahvn.cli.chat_cli module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cli.config_cli.html">ahvn.cli.config_cli module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cli.repo_cli.html">ahvn.cli.repo_cli module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.cli.utils.html">ahvn.cli.utils module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.imitator.html">ahvn.imitator package</a><input aria-label="Toggle navigation of ahvn.imitator package" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.imitator.base.html">ahvn.imitator.base module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.klbase.html">ahvn.klbase package</a><input aria-label="Toggle navigation of ahvn.klbase package" class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klbase.base.html">ahvn.klbase.base module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.klengine.html">ahvn.klengine package</a><input aria-label="Toggle navigation of ahvn.klengine package" class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klengine.base.html">ahvn.klengine.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klengine.daac_engine.html">ahvn.klengine.daac_engine module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klengine.facet_engine.html">ahvn.klengine.facet_engine module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klengine.vector_engine.html">ahvn.klengine.vector_engine module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.klstore.html">ahvn.klstore package</a><input aria-label="Toggle navigation of ahvn.klstore package" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klstore.base.html">ahvn.klstore.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klstore.cache_store.html">ahvn.klstore.cache_store module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klstore.cascade_store.html">ahvn.klstore.cascade_store module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klstore.db_store.html">ahvn.klstore.db_store module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.klstore.vdb_store.html">ahvn.klstore.vdb_store module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.llm.html">ahvn.llm package</a><input aria-label="Toggle navigation of ahvn.llm package" class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.llm.base.html">ahvn.llm.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.llm.llm_utils.html">ahvn.llm.llm_utils module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/ahvn.market.html">ahvn.market package</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.tool.html">ahvn.tool package</a><input aria-label="Toggle navigation of ahvn.tool package" class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.tool.base.html">ahvn.tool.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.tool.mixin.html">ahvn.tool.mixin module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.ukf.html">ahvn.ukf package</a><input aria-label="Toggle navigation of ahvn.ukf package" class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/ahvn.ukf.templates.html">ahvn.ukf.templates package</a><input aria-label="Toggle navigation of ahvn.ukf.templates package" class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../../api/ahvn.ukf.templates.basic.html">ahvn.ukf.templates.basic package</a><input aria-label="Toggle navigation of ahvn.ukf.templates.basic package" class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.basic.document.html">ahvn.ukf.templates.basic.document module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.basic.experience.html">ahvn.ukf.templates.basic.experience module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.basic.knowledge.html">ahvn.ukf.templates.basic.knowledge module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.basic.prompt.html">ahvn.ukf.templates.basic.prompt module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.basic.resource.html">ahvn.ukf.templates.basic.resource module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.basic.template.html">ahvn.ukf.templates.basic.template module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.basic.tool.html">ahvn.ukf.templates.basic.tool module</a></li>
</ul>
</li>
<li class="toctree-l5 has-children"><a class="reference internal" href="../../api/ahvn.ukf.templates.db.html">ahvn.ukf.templates.db package</a><input aria-label="Toggle navigation of ahvn.ukf.templates.db package" class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.db.col_ukft.html">ahvn.ukf.templates.db.col_ukft module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.db.db_ukft.html">ahvn.ukf.templates.db.db_ukft module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.db.enum_ukft.html">ahvn.ukf.templates.db.enum_ukft module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.db.pred_ukft.html">ahvn.ukf.templates.db.pred_ukft module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.ukf.templates.db.tab_ukft.html">ahvn.ukf.templates.db.tab_ukft module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.ukf.base.html">ahvn.ukf.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.ukf.types.html">ahvn.ukf.types module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.ukf.ukf_utils.html">ahvn.ukf.ukf_utils module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/ahvn.utils.html">ahvn.utils package</a><input aria-label="Toggle navigation of ahvn.utils package" class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/ahvn.utils.basic.html">ahvn.utils.basic package</a><input aria-label="Toggle navigation of ahvn.utils.basic package" class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.cmd_utils.html">ahvn.utils.basic.cmd_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.color_utils.html">ahvn.utils.basic.color_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.config_utils.html">ahvn.utils.basic.config_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.debug_utils.html">ahvn.utils.basic.debug_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.file_utils.html">ahvn.utils.basic.file_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.func_utils.html">ahvn.utils.basic.func_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.hash_utils.html">ahvn.utils.basic.hash_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.jinja_utils.html">ahvn.utils.basic.jinja_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.log_utils.html">ahvn.utils.basic.log_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.misc_utils.html">ahvn.utils.basic.misc_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.parallel_utils.html">ahvn.utils.basic.parallel_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.parser_utils.html">ahvn.utils.basic.parser_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.path_utils.html">ahvn.utils.basic.path_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.request_utils.html">ahvn.utils.basic.request_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.rnd_utils.html">ahvn.utils.basic.rnd_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.serialize_utils.html">ahvn.utils.basic.serialize_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.str_utils.html">ahvn.utils.basic.str_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.basic.type_utils.html">ahvn.utils.basic.type_utils module</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/ahvn.utils.db.html">ahvn.utils.db package</a><input aria-label="Toggle navigation of ahvn.utils.db package" class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../../api/ahvn.utils.db.db_desc.html">ahvn.utils.db.db_desc package</a><input aria-label="Toggle navigation of ahvn.utils.db.db_desc package" class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.utils.db.db_desc.db_desc_gen.html">ahvn.utils.db.db_desc.db_desc_gen module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.utils.db.db_desc.db_info_extract.html">ahvn.utils.db.db_desc.db_info_extract module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.utils.db.db_desc.db_ukf_store.html">ahvn.utils.db.db_desc.db_ukf_store module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.utils.db.db_desc.facet_demo.html">ahvn.utils.db.db_desc.facet_demo module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.utils.db.db_desc.gen_synonyms.html">ahvn.utils.db.db_desc.gen_synonyms module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/ahvn.utils.db.db_desc.synonyms_utils.html">ahvn.utils.db.db_desc.synonyms_utils module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.db.base.html">ahvn.utils.db.base module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.db.db_utils.html">ahvn.utils.db.db_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.db.facet.html">ahvn.utils.db.facet module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.db.types.html">ahvn.utils.db.types module</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/ahvn.utils.extensions.html">ahvn.utils.extensions package</a><input aria-label="Toggle navigation of ahvn.utils.extensions package" class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.extensions.autocode.html">ahvn.utils.extensions.autocode module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.extensions.autofunc.html">ahvn.utils.extensions.autofunc module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.extensions.autoi18n.html">ahvn.utils.extensions.autoi18n module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.extensions.autotask.html">ahvn.utils.extensions.autotask module</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/ahvn.utils.vdb.html">ahvn.utils.vdb package</a><input aria-label="Toggle navigation of ahvn.utils.vdb package" class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.vdb.base.html">ahvn.utils.vdb.base module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.vdb.filter.html">ahvn.utils.vdb.filter module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.vdb.types.html">ahvn.utils.vdb.types module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/ahvn.utils.vdb.vdb_utils.html">ahvn.utils.vdb.vdb_utils module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.utils.default_deps.html">ahvn.utils.default_deps module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/ahvn.utils.deps.html">ahvn.utils.deps module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/ahvn.version.html">ahvn.version module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../community/index.html">Community &amp; Support</a><input aria-label="Toggle navigation of Community &amp; Support" class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../community/resources.html">Community Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../community/troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../citation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/Magolor/AgentHeaven/blob/master/docs/en/source/python-guide/klstore/cascade.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/Magolor/AgentHeaven/edit/master/docs/en/source/python-guide/klstore/cascade.md" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="cascadeklstore">
<h1>CascadeKLStore<a class="headerlink" href="#cascadeklstore" title="Link to this heading">¶</a></h1>
<p>CascadeKLStore is a composite <a class="reference internal" href="base.html"><span class="std std-doc">BaseKLStore</span></a> implementation that orchestrates multiple KLStore backends in a prioritized cascade. It provides unified read access across heterogeneous storage tiers while maintaining independent write control, enabling sophisticated multi-tier storage architectures.</p>
<section id="introduction">
<h2>1. Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<section id="what-is-cascadeklstore">
<h3>1.1. What is CascadeKLStore?<a class="headerlink" href="#what-is-cascadeklstore" title="Link to this heading">¶</a></h3>
<p><strong>CascadeKLStore</strong> is fundamentally different from other KLStore implementations—it’s a <strong>composite store</strong> that wraps and coordinates multiple KLStore backends rather than managing storage directly. Think of it as a storage orchestrator:</p>
<ul class="simple">
<li><p><strong>Multi-Tier Architecture</strong>: Combines multiple KLStores (e.g., fast cache + persistent database + vector store) into a unified interface</p></li>
<li><p><strong>Priority-Based Reads</strong>: Queries cascade through stores in order, returning from the first match (like a cache hierarchy)</p></li>
<li><p><strong>Transparent Retrieval</strong>: Applications see one logical store regardless of physical distribution</p></li>
<li><p><strong>Independent Writes</strong>: Each backend store is managed independently—no automatic data movement</p></li>
</ul>
<p>CascadeKLStore is <strong>NOT</strong> a router that decides where to store data. Instead, you explicitly manage which knowledge objects go into which stores, and CascadeKLStore provides unified read access across them all.</p>
<br/>
</section>
<section id="why-use-cascadeklstore">
<h3>1.2. Why Use CascadeKLStore?<a class="headerlink" href="#why-use-cascadeklstore" title="Link to this heading">¶</a></h3>
<p>This composite design enables powerful storage patterns:</p>
<p><strong>Performance Tiering</strong>: Place frequently accessed knowledge in fast storage (InMemCache) with fallback to slower persistent storage (DatabaseKLStore), automatically querying the fastest available source first.</p>
<p><strong>Backend Diversity</strong>: Combine different storage types for different purposes—e.g., VectorKLStore for semantic search + DatabaseKLStore for structured queries + CacheKLStore for hot data—while presenting a single interface to KLEngines.</p>
<p><strong>Incremental Migration</strong>: Gradually migrate between storage backends by adding new stores to the cascade while maintaining backward compatibility with existing data.</p>
<p><strong>Development/Production Parity</strong>: Use in-memory stores for testing with fallback to production databases, ensuring tests use the same code paths as production.</p>
<br/>
</section>
<section id="key-design-principles">
<h3>1.3. Key Design Principles<a class="headerlink" href="#key-design-principles" title="Link to this heading">¶</a></h3>
<p><strong>Read-Through Cascade</strong>: Queries try each store in order until found—fast stores first, slow stores last.</p>
<p><strong>Independent Write Management</strong>: You explicitly control which store receives which data—no automatic synchronization or data movement.</p>
<p><strong>Deduplication</strong>: Iteration returns unique knowledge objects (by ID) even if duplicated across stores.</p>
<p><strong>Transparent Operations</strong>: Most operations (get, exists, iterate, remove) work seamlessly across all stores.</p>
<br/>
</section>
</section>
<section id="quick-start">
<h2>2. Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading">¶</a></h2>
<section id="basic-usage">
<h3>2.1. Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.klstore</span><span class="w"> </span><span class="kn">import</span> <span class="n">CascadeKLStore</span><span class="p">,</span> <span class="n">CacheKLStore</span><span class="p">,</span> <span class="n">DatabaseKLStore</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemCache</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.ukf</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseUKF</span>

<span class="c1"># Create tier 1: Fast in-memory cache</span>
<span class="n">hot_cache</span> <span class="o">=</span> <span class="n">InMemCache</span><span class="p">()</span>
<span class="n">hot_store</span> <span class="o">=</span> <span class="n">CacheKLStore</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="n">hot_cache</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hot_tier&quot;</span><span class="p">)</span>

<span class="c1"># Create tier 2: Persistent database</span>
<span class="n">cold_store</span> <span class="o">=</span> <span class="n">DatabaseKLStore</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;knowledge.db&quot;</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;sqlite&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cold_tier&quot;</span><span class="p">)</span>

<span class="c1"># Combine into cascade (priority order: hot -&gt; cold)</span>
<span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">hot_store</span><span class="p">,</span> <span class="n">cold_store</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cascade_store&quot;</span><span class="p">)</span>

<span class="c1"># Write directly to specific stores</span>
<span class="n">kl_hot</span> <span class="o">=</span> <span class="n">BaseUKF</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Recent Article&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;article&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="s2">&quot;Latest news&quot;</span><span class="p">)</span>
<span class="n">kl_cold</span> <span class="o">=</span> <span class="n">BaseUKF</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Archive Document&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;document&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="s2">&quot;Historical data&quot;</span><span class="p">)</span>

<span class="n">hot_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl_hot</span><span class="p">)</span>    <span class="c1"># Write to hot tier</span>
<span class="n">cold_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl_hot</span><span class="p">)</span>   <span class="c1"># Write to cold tier</span>
<span class="n">cold_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl_cold</span><span class="p">)</span>  <span class="c1"># Write to cold tier</span>

<span class="c1"># Read from cascade (automatically finds in appropriate tier)</span>
<span class="n">retrieved_hot</span> <span class="o">=</span> <span class="n">cascade</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kl_hot</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>   <span class="c1"># Found in hot_store (fast)</span>
<span class="n">retrieved_cold</span> <span class="o">=</span> <span class="n">cascade</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kl_cold</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="c1"># Found in cold_store (fallback)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved: </span><span class="si">{</span><span class="n">retrieved_hot</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Works transparently</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved: </span><span class="si">{</span><span class="n">retrieved_cold</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Check existence across all tiers</span>
<span class="n">exists</span> <span class="o">=</span> <span class="n">kl_hot</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">cascade</span>  <span class="c1"># True (found in hot_store)</span>

<span class="c1"># Iterate over all unique knowledge objects</span>
<span class="k">for</span> <span class="n">kl</span> <span class="ow">in</span> <span class="n">cascade</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- </span><span class="si">{</span><span class="n">kl</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Returns both kl_hot and kl_cold</span>
</pre></div>
</div>
<br/>
</section>
<section id="initialization-parameters">
<h3>2.2. Initialization Parameters<a class="headerlink" href="#initialization-parameters" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">stores</span></code></strong> (required): Ordered list of <code class="docutils literal notranslate"><span class="pre">BaseKLStore</span></code> instances—defines priority (first = highest)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">name</span></code></strong> (optional): Name of the cascade instance (default: “default”)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">condition</span></code></strong> (optional): Filter function applied to iteration/removal operations (not used for reads)</p></li>
</ul>
<br/>
</section>
</section>
<section id="core-operations">
<h2>3. Core Operations<a class="headerlink" href="#core-operations" title="Link to this heading">¶</a></h2>
<section id="read-operations-cascade-behavior">
<h3>3.1. Read Operations (Cascade Behavior)<a class="headerlink" href="#read-operations-cascade-behavior" title="Link to this heading">¶</a></h3>
<p>Read operations <strong>cascade through stores in priority order</strong>, returning the first match:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">fast_store</span><span class="p">,</span> <span class="n">medium_store</span><span class="p">,</span> <span class="n">slow_store</span><span class="p">])</span>

<span class="c1"># get() - Returns from first store that has it</span>
<span class="n">kl</span> <span class="o">=</span> <span class="n">cascade</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="c1"># 1. Checks fast_store first</span>
<span class="c1"># 2. If not found, checks medium_store</span>
<span class="c1"># 3. If not found, checks slow_store</span>
<span class="c1"># 4. Returns default if nowhere</span>

<span class="c1"># exists() / __contains__() - Returns True if in ANY store</span>
<span class="k">if</span> <span class="mi">123</span> <span class="ow">in</span> <span class="n">cascade</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Found in at least one store&quot;</span><span class="p">)</span>

<span class="c1"># Efficient: stops at first match, doesn&#39;t search all stores</span>
</pre></div>
</div>
<p><strong>Performance Tip</strong>: Place fastest/most-likely/most-wanted stores first in the list for optimal read performance.</p>
<br/>
</section>
<section id="write-operations-explicit-management">
<h3>3.2. Write Operations (Explicit Management)<a class="headerlink" href="#write-operations-explicit-management" title="Link to this heading">¶</a></h3>
<p><strong>CascadeKLStore does NOT support direct upsert/insert</strong> — you must write to specific stores:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">hot_store</span><span class="p">,</span> <span class="n">cold_store</span><span class="p">])</span>

<span class="c1"># ❌ This raises NotImplementedError</span>
<span class="c1"># cascade.upsert(kl)  # Error: &quot;Upsert operation is not allowed&quot;</span>

<span class="c1"># ✅ Instead, write to specific stores</span>
<span class="n">hot_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl_new</span><span class="p">)</span>    <span class="c1"># Write to hot tier</span>
<span class="n">cold_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl_new</span><span class="p">)</span>   <span class="c1"># Write to cold tier</span>
<span class="n">cold_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl_arch</span><span class="p">)</span>  <span class="c1"># Write to cold tier</span>

<span class="c1"># Common pattern: Write to first store (hot tier)</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">stores</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl_recent</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Why no automatic writes?</strong> You control the storage strategy — whether based on recency, importance, size, or any other criteria. The cascade doesn’t make assumptions.</p>
<p>It is recommended that lower-priority stores (e.g., cold storage) also receive writes for redundancy or backup, depending on your application’s needs. However, note that is not necessarily required, as CascadeKLStore may not necessarily be used for fallback purposes.</p>
<blockquote>
<div><p><strong>Tip:</strong> To enable smart auto-write strategies, you need a component much more powerful than CascadeKLStore. See <a class="reference internal" href="../klbase.html"><span class="std std-doc">KLBase</span></a> for more information.</p>
</div></blockquote>
<br/>
</section>
<section id="remove-operations-all-stores">
<h3>3.3. Remove Operations (All Stores)<a class="headerlink" href="#remove-operations-all-stores" title="Link to this heading">¶</a></h3>
<p>Remove operations execute on <strong>all stores</strong> that contain the key:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">store1</span><span class="p">,</span> <span class="n">store2</span><span class="p">,</span> <span class="n">store3</span><span class="p">])</span>

<span class="c1"># Remove from all stores</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="c1"># Internally:</span>
<span class="c1"># - Checks if 123 in store1 → removes if found</span>
<span class="c1"># - Checks if 123 in store2 → removes if found</span>
<span class="c1"># - Checks if 123 in store3 → removes if found</span>

<span class="c1"># Batch remove</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">batch_remove</span><span class="p">([</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">,</span> <span class="mi">789</span><span class="p">])</span>  <span class="c1"># Removes from all stores</span>
</pre></div>
</div>
<br/>
</section>
<section id="iteration-deduplicated">
<h3>3.4. Iteration (Deduplicated)<a class="headerlink" href="#iteration-deduplicated" title="Link to this heading">¶</a></h3>
<p>Iteration returns <strong>unique knowledge objects</strong> across all stores:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Suppose:</span>
<span class="c1"># - store1 has [kl_1, kl_2]</span>
<span class="c1"># - store2 has [kl_2, kl_3]  # kl_2 duplicated</span>

<span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">store1</span><span class="p">,</span> <span class="n">store2</span><span class="p">])</span>

<span class="k">for</span> <span class="n">kl</span> <span class="ow">in</span> <span class="n">cascade</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">kl</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="c1"># Output: 1, 2, 3  (kl_2 returned only once)</span>

<span class="c1"># Count unique objects</span>
<span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cascade</span><span class="p">)</span>  <span class="c1"># 3 (not 4)</span>
</pre></div>
</div>
<p>Again, it is NOT required for lower-priority stores to contain all data in the higher-priority stores, a union is performed during iteration.</p>
<p><strong>Deduplication</strong>: First occurrence (by ID) wins — duplicates in later stores are skipped.</p>
<br/>
</section>
<section id="clear-and-close">
<h3>3.5. Clear and Close<a class="headerlink" href="#clear-and-close" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clear all stores</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># Removes all data from all stores</span>

<span class="c1"># Flush all stores (ensure persistence)</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

<span class="c1"># Close all stores (release resources)</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<br/>
</section>
</section>
<section id="usage-patterns">
<h2>4. Usage Patterns<a class="headerlink" href="#usage-patterns" title="Link to this heading">¶</a></h2>
<section id="hot-cold-storage-architecture">
<h3>4.1. Hot/Cold Storage Architecture<a class="headerlink" href="#hot-cold-storage-architecture" title="Link to this heading">¶</a></h3>
<p>Classic caching pattern with fast hot storage and slower cold storage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.klstore</span><span class="w"> </span><span class="kn">import</span> <span class="n">CascadeKLStore</span><span class="p">,</span> <span class="n">CacheKLStore</span><span class="p">,</span> <span class="n">DatabaseKLStore</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemCache</span><span class="p">,</span> <span class="n">DiskCache</span>

<span class="c1"># Hot tier: Fast in-memory cache (limited capacity)</span>
<span class="n">hot_cache</span> <span class="o">=</span> <span class="n">InMemCache</span><span class="p">()</span>
<span class="n">hot_store</span> <span class="o">=</span> <span class="n">CacheKLStore</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="n">hot_cache</span><span class="p">)</span>

<span class="c1"># Cold tier: Persistent database (unlimited capacity)</span>
<span class="n">cold_store</span> <span class="o">=</span> <span class="n">DatabaseKLStore</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;knowledge.db&quot;</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;sqlite&quot;</span><span class="p">)</span>

<span class="c1"># Cascade: hot first, cold second</span>
<span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">hot_store</span><span class="p">,</span> <span class="n">cold_store</span><span class="p">])</span>

<span class="c1"># Write strategy: New data goes to hot tier</span>
<span class="k">def</span><span class="w"> </span><span class="nf">add_knowledge</span><span class="p">(</span><span class="n">kl</span><span class="p">):</span>
    <span class="n">hot_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl</span><span class="p">)</span>      <span class="c1"># Write to hot</span>
    <span class="n">cold_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl</span><span class="p">)</span>     <span class="c1"># Backup to cold (optional)</span>

<span class="c1"># Reads automatically use fastest available</span>
<span class="n">kl</span> <span class="o">=</span> <span class="n">cascade</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>  <span class="c1"># Fast if in hot_store, slower if only in cold_store</span>
</pre></div>
</div>
<br/>
</section>
<section id="multi-backend-klengine">
<h3>4.2. Multi-Backend KLEngine<a class="headerlink" href="#multi-backend-klengine" title="Link to this heading">¶</a></h3>
<p>Use CascadeKLStore to provide a single storage interface for KLEngines querying multiple backends:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.klstore</span><span class="w"> </span><span class="kn">import</span> <span class="n">CascadeKLStore</span><span class="p">,</span> <span class="n">VectorKLStore</span><span class="p">,</span> <span class="n">DatabaseKLStore</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.klengine</span><span class="w"> </span><span class="kn">import</span> <span class="n">VectorKLEngine</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.llm</span><span class="w"> </span><span class="kn">import</span> <span class="n">LLM</span>

<span class="c1"># Different storage backends for different data</span>
<span class="n">vector_store</span> <span class="o">=</span> <span class="n">VectorKLStore</span><span class="p">(</span><span class="n">collection</span><span class="o">=</span><span class="s2">&quot;vectors&quot;</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;lancedb&quot;</span><span class="p">,</span> <span class="n">embedder</span><span class="o">=</span><span class="n">LLM</span><span class="p">(</span><span class="n">preset</span><span class="o">=</span><span class="s2">&quot;embedder&quot;</span><span class="p">))</span>
<span class="n">db_store</span> <span class="o">=</span> <span class="n">DatabaseKLStore</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;knowledge.db&quot;</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;sqlite&quot;</span><span class="p">)</span>

<span class="c1"># Cascade: vector first (for semantic search), database second (for older data)</span>
<span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">vector_store</span><span class="p">,</span> <span class="n">db_store</span><span class="p">])</span>

<span class="c1"># KLEngine queries both stores transparently</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">VectorKLEngine</span><span class="p">(</span><span class="n">storage</span><span class="o">=</span><span class="n">cascade</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;machine learning tutorials&quot;</span><span class="p">,</span> <span class="n">top_k</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># Searches data from both vector_store and db_store</span>
</pre></div>
</div>
<br/>
</section>
<section id="development-production-parity">
<h3>4.3. Development/Production Parity<a class="headerlink" href="#development-production-parity" title="Link to this heading">¶</a></h3>
<p>Use in-memory stores for testing with production database fallback:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.klstore</span><span class="w"> </span><span class="kn">import</span> <span class="n">CascadeKLStore</span><span class="p">,</span> <span class="n">CacheKLStore</span><span class="p">,</span> <span class="n">DatabaseKLStore</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemCache</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_store</span><span class="p">():</span>
    <span class="n">stores</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TESTING&quot;</span><span class="p">):</span>
        <span class="c1"># Testing: Add in-memory store first</span>
        <span class="n">test_cache</span> <span class="o">=</span> <span class="n">InMemCache</span><span class="p">()</span>
        <span class="n">test_store</span> <span class="o">=</span> <span class="n">CacheKLStore</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="n">test_cache</span><span class="p">)</span>
        <span class="n">stores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">test_store</span><span class="p">)</span>
    
    <span class="c1"># Always add production database</span>
    <span class="n">prod_store</span> <span class="o">=</span> <span class="n">DatabaseKLStore</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;production.db&quot;</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;pg&quot;</span><span class="p">)</span>
    <span class="n">stores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prod_store</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="n">stores</span><span class="p">)</span>

<span class="c1"># In tests: reads from test_store if present, falls back to prod_store</span>
<span class="c1"># In production: reads directly from prod_store</span>
<span class="n">cascade</span> <span class="o">=</span> <span class="n">create_store</span><span class="p">()</span>
</pre></div>
</div>
<br/>
</section>
<section id="incremental-migration">
<h3>4.4. Incremental Migration<a class="headerlink" href="#incremental-migration" title="Link to this heading">¶</a></h3>
<p>Migrate between storage backends without downtime:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.klstore</span><span class="w"> </span><span class="kn">import</span> <span class="n">CascadeKLStore</span><span class="p">,</span> <span class="n">DatabaseKLStore</span>

<span class="c1"># Old backend (legacy)</span>
<span class="n">old_store</span> <span class="o">=</span> <span class="n">DatabaseKLStore</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;old_db.db&quot;</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;sqlite&quot;</span><span class="p">)</span>

<span class="c1"># New backend (modern, faster)</span>
<span class="n">new_store</span> <span class="o">=</span> <span class="n">DatabaseKLStore</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;new_db&quot;</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;pg&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">)</span>

<span class="c1"># Cascade: new first, old second</span>
<span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">new_store</span><span class="p">,</span> <span class="n">old_store</span><span class="p">])</span>

<span class="c1"># Gradually migrate data</span>
<span class="k">for</span> <span class="n">kl</span> <span class="ow">in</span> <span class="n">old_store</span><span class="p">:</span>
    <span class="n">new_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">kl</span><span class="p">)</span>           <span class="c1"># Copy to new store</span>
    <span class="c1"># old_store.remove(kl.id)      # Optionally remove from old</span>

<span class="c1"># Application reads from cascade (new first, old fallback)</span>
<span class="c1"># Once migration complete, remove old_store from cascade</span>
</pre></div>
</div>
<br/>
</section>
</section>
<section id="advanced-patterns">
<h2>5. Advanced Patterns<a class="headerlink" href="#advanced-patterns" title="Link to this heading">¶</a></h2>
<section id="conditional-filtering-across-tiers">
<h3>5.5. Conditional Filtering Across Tiers<a class="headerlink" href="#conditional-filtering-across-tiers" title="Link to this heading">¶</a></h3>
<p>Apply conditions to control which objects are visible through the cascade:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span>
    <span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">store1</span><span class="p">,</span> <span class="n">store2</span><span class="p">,</span> <span class="n">store3</span><span class="p">],</span>
    <span class="n">condition</span><span class="o">=</span><span class="k">lambda</span> <span class="n">kl</span><span class="p">:</span> <span class="n">kl</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;published&quot;</span>
<span class="p">)</span>

<span class="c1"># Only published knowledge objects visible in iteration</span>
<span class="k">for</span> <span class="n">kl</span> <span class="ow">in</span> <span class="n">cascade</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">kl</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;published&quot;</span>

<span class="c1"># Note: get() and exists() ignore condition (read all data)</span>
<span class="c1"># Condition only applies to iteration and removal</span>
</pre></div>
</div>
<br/>
</section>
<section id="dynamic-store-management">
<h3>5.6. Dynamic Store Management<a class="headerlink" href="#dynamic-store-management" title="Link to this heading">¶</a></h3>
<p>Modify the cascade at runtime:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">store1</span><span class="p">,</span> <span class="n">store2</span><span class="p">])</span>

<span class="c1"># Add a new tier dynamically</span>
<span class="n">new_store</span> <span class="o">=</span> <span class="n">VectorKLStore</span><span class="p">(</span><span class="n">collection</span><span class="o">=</span><span class="s2">&quot;new&quot;</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;lancedb&quot;</span><span class="p">,</span> <span class="n">embedder</span><span class="o">=</span><span class="n">embedder</span><span class="p">)</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">stores</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">new_store</span><span class="p">)</span>  <span class="c1"># Insert at highest priority</span>

<span class="c1"># Remove a tier</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">stores</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">store2</span><span class="p">)</span>

<span class="c1"># Reorder priorities</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">stores</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_store</span><span class="p">,</span> <span class="n">store1</span><span class="p">,</span> <span class="n">store2</span><span class="p">]</span>  <span class="c1"># new_store now highest priority</span>
</pre></div>
</div>
<br/>
</section>
<section id="per-store-access-patterns">
<h3>5.7. Per-Store Access Patterns<a class="headerlink" href="#per-store-access-patterns" title="Link to this heading">¶</a></h3>
<p>Access individual stores for fine-grained control:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span><span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">hot_store</span><span class="p">,</span> <span class="n">warm_store</span><span class="p">,</span> <span class="n">cold_store</span><span class="p">])</span>

<span class="c1"># Check which tier contains data</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">store</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cascade</span><span class="o">.</span><span class="n">stores</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">kl</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">store</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found in tier </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">store</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Get from specific tier</span>
<span class="n">kl_from_cold</span> <span class="o">=</span> <span class="n">cascade</span><span class="o">.</span><span class="n">stores</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kl</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

<span class="c1"># Move data between tiers</span>
<span class="k">if</span> <span class="n">kl</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">cold_store</span> <span class="ow">and</span> <span class="n">kl</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;my_custom_hotness_metric&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
    <span class="n">hot_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">cold_store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kl</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>  <span class="c1"># Promote to hot tier</span>
</pre></div>
</div>
<br/>
</section>
</section>
<section id="limitations-and-considerations">
<h2>6. Limitations and Considerations<a class="headerlink" href="#limitations-and-considerations" title="Link to this heading">¶</a></h2>
<section id="no-automatic-synchronization">
<h3>6.1. No Automatic Synchronization<a class="headerlink" href="#no-automatic-synchronization" title="Link to this heading">¶</a></h3>
<p>CascadeKLStore does <strong>NOT</strong>:</p>
<ul class="simple">
<li><p>❌ Automatically promote hot data to faster stores</p></li>
<li><p>❌ Automatically demote cold data to slower stores</p></li>
<li><p>❌ Synchronize data across stores</p></li>
<li><p>❌ Validate consistency between stores</p></li>
</ul>
<p>You must implement these strategies yourself if needed.</p>
<br/>
</section>
<section id="write-management-responsibility">
<h3>6.2. Write Management Responsibility<a class="headerlink" href="#write-management-responsibility" title="Link to this heading">¶</a></h3>
<p>You are responsible for:</p>
<ul class="simple">
<li><p>Deciding which store(s) to write to</p></li>
<li><p>Handling data replication (if desired)</p></li>
<li><p>Managing capacity limits (if any)</p></li>
<li><p>Implementing eviction policies</p></li>
</ul>
<br/>
</section>
<section id="duplicate-data-handling">
<h3>6.3. Duplicate Data Handling<a class="headerlink" href="#duplicate-data-handling" title="Link to this heading">¶</a></h3>
<p>If the same knowledge object exists in multiple stores:</p>
<ul class="simple">
<li><p><strong>Reads</strong>: Return from first store (highest priority)</p></li>
<li><p><strong>Iteration</strong>: Return only once (deduplication by ID)</p></li>
<li><p><strong>Updates</strong>: Must update all copies manually</p></li>
<li><p><strong>Removes</strong>: Remove from all stores</p></li>
</ul>
<br/>
</section>
<section id="performance-considerations">
<h3>6.4. Performance Considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Read Latency</strong>: Worst case is sum of all store latencies (if object in last store)</p></li>
<li><p><strong>Iteration Cost</strong>: Iterates through ALL stores (can be slow if many stores)</p></li>
<li><p><strong>No Query Optimization</strong>: Doesn’t optimize queries across stores—use KLEngines for that</p></li>
</ul>
<br/>
</section>
</section>
<section id="complete-example">
<h2>7. Complete Example<a class="headerlink" href="#complete-example" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.klstore</span><span class="w"> </span><span class="kn">import</span> <span class="n">CascadeKLStore</span><span class="p">,</span> <span class="n">CacheKLStore</span><span class="p">,</span> <span class="n">DatabaseKLStore</span><span class="p">,</span> <span class="n">VectorKLStore</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemCache</span><span class="p">,</span> <span class="n">DiskCache</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.llm</span><span class="w"> </span><span class="kn">import</span> <span class="n">LLM</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ahvn.ukf</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseUKF</span><span class="p">,</span> <span class="n">ptags</span>

<span class="c1"># Initialize embedder for vector store</span>
<span class="n">embedder</span> <span class="o">=</span> <span class="n">LLM</span><span class="p">(</span><span class="n">preset</span><span class="o">=</span><span class="s2">&quot;embedder&quot;</span><span class="p">)</span>

<span class="c1"># Tier 1: Ultra-fast in-memory cache for hot data (recent 1000 articles)</span>
<span class="n">hot_cache</span> <span class="o">=</span> <span class="n">InMemCache</span><span class="p">()</span>
<span class="n">hot_store</span> <span class="o">=</span> <span class="n">CacheKLStore</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="n">hot_cache</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hot_tier&quot;</span><span class="p">)</span>

<span class="c1"># Tier 2: Fast disk cache for warm data (recent 10000 articles)</span>
<span class="n">warm_cache</span> <span class="o">=</span> <span class="n">DiskCache</span><span class="p">(</span><span class="s2">&quot;/var/cache/knowledge_warm&quot;</span><span class="p">,</span> <span class="n">size_limit</span><span class="o">=</span><span class="mi">1024</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
<span class="n">warm_store</span> <span class="o">=</span> <span class="n">CacheKLStore</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="n">warm_cache</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;warm_tier&quot;</span><span class="p">)</span>

<span class="c1"># Tier 3: Database for structured metadata queries</span>
<span class="n">db_store</span> <span class="o">=</span> <span class="n">DatabaseKLStore</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;knowledge.db&quot;</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;sqlite&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;db_tier&quot;</span><span class="p">)</span>

<span class="c1"># Tier 4: Vector store for semantic search (all articles)</span>
<span class="n">vector_store</span> <span class="o">=</span> <span class="n">VectorKLStore</span><span class="p">(</span>
    <span class="n">collection</span><span class="o">=</span><span class="s2">&quot;all_articles&quot;</span><span class="p">,</span>
    <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;lancedb&quot;</span><span class="p">,</span>
    <span class="n">uri</span><span class="o">=</span><span class="s2">&quot;./data/vectors&quot;</span><span class="p">,</span>
    <span class="n">embedder</span><span class="o">=</span><span class="n">embedder</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;vector_tier&quot;</span>
<span class="p">)</span>

<span class="c1"># Create cascade (priority order: hot -&gt; warm -&gt; db -&gt; vector)</span>
<span class="n">cascade</span> <span class="o">=</span> <span class="n">CascadeKLStore</span><span class="p">(</span>
    <span class="n">stores</span><span class="o">=</span><span class="p">[</span><span class="n">hot_store</span><span class="p">,</span> <span class="n">warm_store</span><span class="p">,</span> <span class="n">db_store</span><span class="p">,</span> <span class="n">vector_store</span><span class="p">],</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;article_cascade&quot;</span>
<span class="p">)</span>

<span class="c1"># Simulate article publishing workflow</span>
<span class="n">articles</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">BaseUKF</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Breaking News: AI Breakthrough&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;news_article&quot;</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="s2">&quot;Major advancement in artificial intelligence...&quot;</span><span class="p">,</span>
        <span class="n">tags</span><span class="o">=</span><span class="n">ptags</span><span class="p">(</span><span class="n">CATEGORY</span><span class="o">=</span><span class="s2">&quot;technology&quot;</span><span class="p">,</span> <span class="n">IMPORTANCE</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="n">RECENCY</span><span class="o">=</span><span class="s2">&quot;today&quot;</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">BaseUKF</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Python Tutorial&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;tutorial&quot;</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="s2">&quot;Learn Python programming step by step...&quot;</span><span class="p">,</span>
        <span class="n">tags</span><span class="o">=</span><span class="n">ptags</span><span class="p">(</span><span class="n">CATEGORY</span><span class="o">=</span><span class="s2">&quot;programming&quot;</span><span class="p">,</span> <span class="n">IMPORTANCE</span><span class="o">=</span><span class="s2">&quot;medium&quot;</span><span class="p">,</span> <span class="n">RECENCY</span><span class="o">=</span><span class="s2">&quot;this_week&quot;</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">BaseUKF</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Historical Analysis of WWI&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;research_article&quot;</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="s2">&quot;Comprehensive study of World War I causes...&quot;</span><span class="p">,</span>
        <span class="n">tags</span><span class="o">=</span><span class="n">ptags</span><span class="p">(</span><span class="n">CATEGORY</span><span class="o">=</span><span class="s2">&quot;history&quot;</span><span class="p">,</span> <span class="n">IMPORTANCE</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="n">RECENCY</span><span class="o">=</span><span class="s2">&quot;old&quot;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">]</span>

<span class="c1"># Write strategy: tier based on recency and importance</span>
<span class="k">def</span><span class="w"> </span><span class="nf">publish_article</span><span class="p">(</span><span class="n">article</span><span class="p">):</span>
    <span class="c1"># All articles go to vector store for semantic search</span>
    <span class="n">vector_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">article</span><span class="p">)</span>
    
    <span class="c1"># All articles go to database for structured queries</span>
    <span class="n">db_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">article</span><span class="p">)</span>
    
    <span class="c1"># Recent + important articles go to warm cache</span>
    <span class="k">if</span> <span class="n">article</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;RECENCY&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;today&quot;</span><span class="p">,</span> <span class="s2">&quot;this_week&quot;</span><span class="p">]:</span>
        <span class="n">warm_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">article</span><span class="p">)</span>
    
    <span class="c1"># Breaking news goes to hot cache</span>
    <span class="k">if</span> <span class="n">article</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;IMPORTANCE&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;high&quot;</span><span class="p">:</span>
        <span class="n">hot_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">article</span><span class="p">)</span>

<span class="c1"># Publish articles</span>
<span class="k">for</span> <span class="n">article</span> <span class="ow">in</span> <span class="n">articles</span><span class="p">:</span>
    <span class="n">publish_article</span><span class="p">(</span><span class="n">article</span><span class="p">)</span>

<span class="c1"># Query through cascade</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total unique articles: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cascade</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># 3</span>

<span class="c1"># Read performance varies by tier</span>
<span class="n">news</span> <span class="o">=</span> <span class="n">cascade</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">articles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># Fast (in hot_store)</span>
<span class="n">tutorial</span> <span class="o">=</span> <span class="n">cascade</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">articles</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># Medium (in warm_store)</span>
<span class="n">history</span> <span class="o">=</span> <span class="n">cascade</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">articles</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>  <span class="c1"># Slower (in db_store or vector_store)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Breaking news: </span><span class="si">{</span><span class="n">news</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (high priority)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tutorial: </span><span class="si">{</span><span class="n">tutorial</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (medium priority)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Historical: </span><span class="si">{</span><span class="n">history</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (low priority)&quot;</span><span class="p">)</span>

<span class="c1"># Check tier distribution</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Tier distribution:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- Hot tier: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">hot_store</span><span class="p">)</span><span class="si">}</span><span class="s2"> articles&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- Warm tier: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">warm_store</span><span class="p">)</span><span class="si">}</span><span class="s2"> articles&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- Database tier: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">db_store</span><span class="p">)</span><span class="si">}</span><span class="s2"> articles&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- Vector tier: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">vector_store</span><span class="p">)</span><span class="si">}</span><span class="s2"> articles&quot;</span><span class="p">)</span>

<span class="c1"># Iterate over all unique articles</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">All articles:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">article</span> <span class="ow">in</span> <span class="n">cascade</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- </span><span class="si">{</span><span class="n">article</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">article</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

<span class="c1"># Promote an article to hot tier based on access pattern</span>
<span class="k">if</span> <span class="n">tutorial</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;IMPORTANCE&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;medium&quot;</span><span class="p">:</span>
    <span class="n">hot_store</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span><span class="n">tutorial</span><span class="p">)</span>  <span class="c1"># Manually promote</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Promoted &#39;</span><span class="si">{</span><span class="n">tutorial</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; to hot tier&quot;</span><span class="p">)</span>

<span class="c1"># Remove an article from all tiers</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">history</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Removed &#39;</span><span class="si">{</span><span class="n">history</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; from all tiers&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Remaining articles: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cascade</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Clean up</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>   <span class="c1"># Ensure all tiers persisted</span>
<span class="n">cascade</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># Close all connections</span>
</pre></div>
</div>
<br/>
</section>
<section id="further-exploration">
<h2>8. Further Exploration<a class="headerlink" href="#further-exploration" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p><strong>Tip:</strong> For the interface and common operations, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="base.html"><span class="std std-doc">BaseKLStore</span></a> - Abstract base class defining the KLStore interface and shared functionality</p></li>
</ul>
</div></blockquote>
<blockquote>
<div><p><strong>Tip:</strong> For individual KLStore implementations to use in cascades, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="cache.html"><span class="std std-doc">CacheKLStore</span></a> - Lightweight cache-backed storage with multiple backend options</p></li>
<li><p><a class="reference internal" href="database.html"><span class="std std-doc">DatabaseKLStore</span></a> - Persistent relational database storage with ORM support</p></li>
<li><p><a class="reference internal" href="vector.html"><span class="std std-doc">VectorKLStore</span></a> - Vector database storage for semantic similarity search</p></li>
</ul>
</div></blockquote>
<blockquote>
<div><p><strong>Tip:</strong> For knowledge retrieval across cascade stores, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../klengine/index.html"><span class="std std-doc">KLEngine</span></a> - Search engine implementations built on top of KLStores</p></li>
<li><p><a class="reference internal" href="../klengine/vector.html"><span class="std std-doc">VectorKLEngine</span></a> - Semantic search across multiple storage tiers</p></li>
<li><p><a class="reference internal" href="../klengine/daac.html"><span class="std std-doc">DAACKLEngine</span></a> - Dense and accurate retrieval with cascade support</p></li>
</ul>
</div></blockquote>
<br/>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../klengine/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">KLEngine</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="vector.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">VectorKLStore</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, RubikSQL Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CascadeKLStore</a><ul>
<li><a class="reference internal" href="#introduction">1. Introduction</a><ul>
<li><a class="reference internal" href="#what-is-cascadeklstore">1.1. What is CascadeKLStore?</a></li>
<li><a class="reference internal" href="#why-use-cascadeklstore">1.2. Why Use CascadeKLStore?</a></li>
<li><a class="reference internal" href="#key-design-principles">1.3. Key Design Principles</a></li>
</ul>
</li>
<li><a class="reference internal" href="#quick-start">2. Quick Start</a><ul>
<li><a class="reference internal" href="#basic-usage">2.1. Basic Usage</a></li>
<li><a class="reference internal" href="#initialization-parameters">2.2. Initialization Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#core-operations">3. Core Operations</a><ul>
<li><a class="reference internal" href="#read-operations-cascade-behavior">3.1. Read Operations (Cascade Behavior)</a></li>
<li><a class="reference internal" href="#write-operations-explicit-management">3.2. Write Operations (Explicit Management)</a></li>
<li><a class="reference internal" href="#remove-operations-all-stores">3.3. Remove Operations (All Stores)</a></li>
<li><a class="reference internal" href="#iteration-deduplicated">3.4. Iteration (Deduplicated)</a></li>
<li><a class="reference internal" href="#clear-and-close">3.5. Clear and Close</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage-patterns">4. Usage Patterns</a><ul>
<li><a class="reference internal" href="#hot-cold-storage-architecture">4.1. Hot/Cold Storage Architecture</a></li>
<li><a class="reference internal" href="#multi-backend-klengine">4.2. Multi-Backend KLEngine</a></li>
<li><a class="reference internal" href="#development-production-parity">4.3. Development/Production Parity</a></li>
<li><a class="reference internal" href="#incremental-migration">4.4. Incremental Migration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-patterns">5. Advanced Patterns</a><ul>
<li><a class="reference internal" href="#conditional-filtering-across-tiers">5.5. Conditional Filtering Across Tiers</a></li>
<li><a class="reference internal" href="#dynamic-store-management">5.6. Dynamic Store Management</a></li>
<li><a class="reference internal" href="#per-store-access-patterns">5.7. Per-Store Access Patterns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#limitations-and-considerations">6. Limitations and Considerations</a><ul>
<li><a class="reference internal" href="#no-automatic-synchronization">6.1. No Automatic Synchronization</a></li>
<li><a class="reference internal" href="#write-management-responsibility">6.2. Write Management Responsibility</a></li>
<li><a class="reference internal" href="#duplicate-data-handling">6.3. Duplicate Data Handling</a></li>
<li><a class="reference internal" href="#performance-considerations">6.4. Performance Considerations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#complete-example">7. Complete Example</a></li>
<li><a class="reference internal" href="#further-exploration">8. Further Exploration</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=9dc39874"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=30646c52"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/line-numbers.js?v=8c0ba6c9"></script>
    <script src="../../_static/mouse-spotlight.js?v=8186b80c"></script>
    <script src="../../_static/dynamic-background.js?v=8e04f8c5"></script>
    <script src="../../_static/sidebar-toggle.js?v=d0176dfc"></script>
    </body>
</html>